#!/usr/bin/env sh

echo "Husky: running format, lint and build before commit..."

# Ensure we run inside the project directory
cd "$(dirname -- "$0")/.." || exit 1

# Format all files and re-stage changes
npm run format || exit 1
git add -A || exit 1

# Lint the project
npm run lint || exit 1

# Build to catch type/errors before commit
npm run build || exit 1

echo "Husky: checks passed. Proceeding with commit."